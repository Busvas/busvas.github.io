<!DOCTYPE html>
<html lang="es">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VM722PC0PC"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-VM722PC0PC');
    </script>
    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                    new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-KRDV7FXT');</script>
    <!-- End Google Tag Manager -->
    <meta name="google-adsense-account" content="ca-pub-9471796670993449">


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Busvas - horarios</title>

    <!-- HEADERS NUCLEAR ANTI-CACH√â PARA COMBATIR CHROME -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0, s-maxage=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Last-Modified" content="0">
    <meta http-equiv="If-Modified-Since" content="0">
    <meta http-equiv="X-Accel-Expires" content="0">
    <meta http-equiv="Surrogate-Control" content="no-store">
    <meta name="cache-control" content="no-cache">
    <meta name="expires" content="Thu, 01 Jan 1970 00:00:00 GMT">
    <meta name="pragma" content="no-cache">
    <meta name="vary" content="*">
    <meta http-equiv="Clear-Site-Data" content="*">
    <!-- ICONOS Y ESTILOS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css?v=0928">
    <link rel="stylesheet" href="styles/header.css?v=0928">
    <link rel="stylesheet" href="styles/ads.css?v=1010">
    <link rel="stylesheet" href="styles/footer.css?v=0928">
    <link rel="stylesheet" href="styles/favoritos.css?v=0928">
    <link rel="stylesheet" href="styles/search.css?v=0928">
    <link rel="stylesheet" href="styles/viajero.css?v=1010">
    <link rel="stylesheet" href="styles/noticias.css?v=1012">
    <!-- ESTILOS PARA AVISO LEGAL -->
    <style>
        .footer-legal {
            grid-column: 1 / -1;
            text-align: center;
            font-size: 0.8rem;
            color: #a0a0a0;
            border-top: 1px solid #3a3a3a;
            padding-top: 15px;
            margin-top: 20px;
        }

        .footer-legal p {
            margin: 5px 10px;
            line-height: 1.5;
        }
    </style>
    <!-- FAVICON Y META -->
    <link rel="apple-touch-icon" sizes="180x180" href="img/logos/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/logos/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/logos/favicon-16x16.png">
    <link rel="manifest" href="img/logos/site.webmanifest">
    <meta name="description"
        content="‚úÖ Horarios de buses en Ecuador 2025 üöå. Consulta rutas, precios y terminales de todas las cooperativas. Informaci√≥n verificada y en tiempo real.">
    <meta name="keywords"
        content="horarios buses Ecuador, rutas buses Ecuador, terminal terrestre Quito, Guayaquil buses, cooperativas de transporte Ecuador">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="stylesheet" href="mapa/mapa.css?v=1012">
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KRDV7FXT" height="0" width="0"
            style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <!-- MODAL FAVORITOS -->
    <div id="favorite-routes-modal" class="favorite-modal minimized">
        <div class="favorite-modal-header">
            <span class="favorite-modal-title"><i class="fas fa-star"></i> Rutas guardadas</span>
            <button id="toggle-favorite-modal" class="favorite-modal-close">
                <i class="fas fa-chevron-down"></i>
            </button>
        </div>
        <div id="favorite-routes-list" class="favorite-routes-list"></div>
    </div>

    <!-- MODAL DE B√öSQUEDA -->
    <div id="search-modal" class="search-modal">
        <div class="search-modal-content">
            <button class="search-modal-close" aria-label="Cerrar">
                <i class="fas fa-times"></i>
            </button>
            <h2><i class="fas fa-search-location"></i> Buscar ruta</h2>
            <div class="search-fields">
                <div class="search-field">
                    <label for="search-origin">¬øD√≥nde est√°s?</label>
                    <input type="text" id="search-origin" placeholder="Ciudad de origen">
                </div>
                <div class="search-field">
                    <label for="search-dest">¬øD√≥nde quieres ir?</label>
                    <input type="text" id="search-dest" placeholder="Ciudad de destino">
                </div>
            </div>
            <button id="search-btn-modal" class="search-btn-modal">Buscar</button>
        </div>
    </div>
    <div id="search-modal-overlay" class="search-modal-overlay"></div>

    <!-- NAVBAR -->
    <nav class="navbar">
        <button id="back-btn" class="back-btn" aria-label="Retroceder">
            <i class="fas fa-arrow-left"></i>
        </button>
        <a href="paginas/taxivas.html" id="taxi-btn" class="taxi-btn" aria-label="Ir a TaxiVAS">
            <i class="fas fa-taxi"></i>
        </a>
        <div class="logo">
            <a href="/index.html" id="logo-link">
                <img class="img-logo" src="img/logos/busvasLogo2.png" alt="Busvas Logo">
            </a>
        </div>
        <button id="search-btn" class="search-btn" aria-label="Buscar">
            <i class="fas fa-search"></i>
        </button>
        <button class="sidebar-toggle" aria-label="Noticias">
            <i class="fas fa-newspaper"></i>
        </button>
    </nav>

    <!-- BREADCRUMBS -->
    <div class="path-bar">
        <button id="btn-home" class="path-btn active">
            <i class="fas fa-home"></i> Inicio
        </button>
        <span class="path-separator">></span>
        <button id="btn-province" class="path-btn" disabled>
            Provincia
        </button>
        <span class="path-separator">></span>
        <button id="btn-terminal" class="path-btn" disabled>
            Terminal
        </button>
    </div>

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <!-- CONTENEDOR DE NOTICIAS EN SIDEBAR -->
        <section id="noticias-section" class="noticias-section">
            <div class="noticias-header">
                <span class="noticias-icon"><i class="fas fa-newspaper"></i></span>
                <span class="noticias-title-text">Noticias Nacionales</span>
                <button class="close-sidebar" aria-label="Cerrar sidebar">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="noticias-medios">
                <div class="noticias-medios-title">Inf√≥rmate por medios digitales del pueblo</div>
                <div class="noticias-medios-row">
                    <a href="https://www.instagram.com/bnperiodismo/?hl=es" class="noticias-medio" target="_blank" rel="noopener">
                        <img src="img/bn.png" alt="Medio 1" class="noticias-medio-img" />
                    </a>
                    <a href="https://www.instagram.com/tvo.anuestroestilo/?hl=es" class="noticias-medio" target="_blank" rel="noopener">
                        <img src="img/tvo.png" alt="Medio 2" class="noticias-medio-img" />
                    </a>
                    <a href="https://www.instagram.com/llamingoec_oficial/?hl=es" class="noticias-medio" target="_blank" rel="noopener">
                        <img src="img/llamingo.png" alt="Medio 3" class="noticias-medio-img" />
                    </a>
                    <a href="https://www.instagram.com/radiopichinchamultimedios/?hl=es" class="noticias-medio" target="_blank" rel="noopener">
                        <img src="img/rp.png" alt="Medio 4" class="noticias-medio-img" />
                    </a>
                </div>
            </div>
            <div id="noticias-list" class="noticias-list">
                <!-- Aqu√≠ se insertar√°n los bloques de noticias din√°micamente -->
            </div>
        </section>
       
    </aside>
    <div class="sidebar-overlay"></div>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="main-content">
        <!-- HOME: PROVINCIAS -->
        <section id="home-section" class="section active-section">
            <div class="header-home">
                <h2><i class="fas fa-map-marked-alt"></i> Seleccione su provincia</h2>
                <button id="btn-mapa" class="btn-mapa">Mapa</button>
            </div>
            <div id="province-ads" class="ads-container"></div>
                        <div class="container-home">
                                <div id="province-grid" class="card-grid"></div>

                                <div class="container-mapa">
                                        <div class="mapa-svg-wrapper">
                                                <div id="svg-container">
                                                        Cargando mapa aut√©ntico de Ecuador...
                                                </div>
                                        </div>
                                </div>
                        </div>
        </section>

        <!-- TERMINALES -->
        <section id="terminal-section" class="section">
            <h2><i class="fas fa-bus-alt"></i> Terminales en <span id="current-province-name"></span></h2>
            <div id="terminal-ads" class="ads-container"></div>
            <div id="terminal-grid" class="card-grid"></div>
            <div id="featured-section" class="section">
                <h2><i class="fas fa-trophy"></i> Cooperativas Destacadas</h2>
                <div class="featured-description">
                    <p>Las mejores cooperativas en rutas entre ciudades principales:</p>
                </div>
                <div id="featured-cooperatives" class="featured-grid"></div>
            </div>
        </section>

        <!-- COOPERATIVAS -->
        <section id="cooperative-section" class="section">
            <div class="header-container">
                <h2 class="header-title">
                    <i class="fas fa-route"></i>
                    Rutas desde <span id="current-terminal-name"></span>
                </h2>
                <button id="toggle-all" class="toggle-all-btn">+</button>
            </div>
            <div id="cooperative-ads" class="ads-container"></div>
            <div id="cooperative-container" class="cooperative-grid"></div>
        </section>
    </main>

    <!-- TOOLTIP -->
    <div id="tooltip" class="tooltip"></div>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-description">
                <p>
                    Busvas.com es la gu√≠a de rutas y horarios de buses interprovinciales en Ecuador. Encuentra
                    informaci√≥n actualizada de terminales, cooperativas, destinos y servicios de transporte terrestre.
                    ¬°Viaja informado y seguro!
                </p>
            </div>
            <div class="footer-help">
                <p>¬øNo hay el horario que buscas?<br>
                    ¬øTienes informaci√≥n de los horarios?</p>
                                
            <div class="footer-contact">
                <span>
                    <a href="mailto:busvasvos@gmail.com">
                        <i class="fas fa-envelope"></i> busvasvos@gmail.com
                    </a>
                </span>
                <!-- <span>
                    <a href="https://wa.me/593991194932" target="_blank" rel="noopener">
                        <i class="fas fa-phone"></i> +593 99 1194 932
                    </a>
                </span>
                -->
            </div>
            <div class="footer-legal">
                <p>busvas.com es un directorio de informaci√≥n. Los horarios, precios y rutas son propiedad de cada
                    empresa de transporte. Para la informaci√≥n m√°s precisa y actualizada, consulte siempre la p√°gina web
                    oficial de la empresa.</p>
                <p>busvas.com no se hace responsable por cambios en los horarios, precios o rutas que no hayan sido
                    comunicados por las empresas.</p>
            </div>
            <div class="footer-copy">
                &copy; 2025 Busvas. Todos los derechos reservados.
            </div>
        </div>
    </footer>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9471796670993449"
        crossorigin="anonymous"></script>
    <!-- ads-new -->
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9471796670993449" data-ad-slot="5253063071"
        data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

    <!-- üìä ANALYTICS TRACKING SYSTEM -->
    <script src="dashboard/js/analytics.js?v=1201"></script>
    <script>
        // üìä Global Banner Click Tracking Function
        window.trackBannerClick = function (bannerData) {
            try {
                console.log('üéØ INTENTANDO REGISTRAR CLICK:', bannerData);

                if (typeof window.analyticsData !== 'undefined' && window.analyticsData) {
                    const result = window.analyticsData.recordClick(bannerData);
                    console.log('‚úÖ CLICK REGISTRADO EXITOSAMENTE:', result);
                    return result;
                } else {
                    console.warn('‚ö†Ô∏è Analytics no est√° cargado a√∫n, reintentando...');

                    // Reintentar despu√©s de un momento
                    setTimeout(() => {
                        if (typeof window.analyticsData !== 'undefined' && window.analyticsData) {
                            const result = window.analyticsData.recordClick(bannerData);
                            console.log('‚úÖ CLICK REGISTRADO EN REINTENTO:', result);
                        } else {
                            console.error('‚ùå Analytics no se pudo cargar despu√©s del reintento');
                        }
                    }, 1000);

                    return null;
                }
            } catch (error) {
                console.error('‚ùå ERROR REGISTRANDO CLICK:', error, bannerData);
                return null;
            }
        };

        // Verificar que analytics se carga correctamente
        document.addEventListener('DOMContentLoaded', function () {
            setTimeout(() => {
                if (typeof window.analyticsData !== 'undefined') {
                    console.log('‚úÖ SISTEMA ANALYTICS CARGADO CORRECTAMENTE');
                    console.log('üìä Datos actuales:', window.analyticsData.getDailyStats());
                } else {
                    console.error('‚ùå SISTEMA ANALYTICS NO SE CARG√ì');
                }
            }, 2000);
        });
    </script>

    <!-- SCRIPTS: ORDEN CORRECTO -->
    <script src="js/auxiliar.js?v=1010"></script>
    <script src="js/ads.js?v=1010"></script>
    <script src="js/viajero.js?v=1110"></script>
    <script src="dashboard/js/counter-demo.js?v=1011"></script>
    <script src="script.js?v=0928"></script>
    <script src="js/search.js?v=0928"></script>
    <script src="js/header.js?v=0928"></script>
    <script src="js/favoritos.js?v=0928"></script>
    <script src="mapa/mapa.js?v=1012"></script>
    <script>
        // üß® REGISTRAR SERVICE WORKER NUCLEAR PARA CHROME
        if ('serviceWorker' in navigator) {
            const isChromeForSW = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);

            if (isChromeForSW) {
                console.log('üß® DETECTADO CHROME - ACTIVANDO SERVICE WORKER NUCLEAR');

                navigator.serviceWorker.register('/sw-destroyer.js', { scope: '/' })
                    .then(registration => {
                        console.log('üß® SERVICE WORKER NUCLEAR REGISTRADO:', registration.scope);

                        // Forzar activaci√≥n inmediata si hay uno nuevo
                        registration.addEventListener('updatefound', () => {
                            console.log('üß® NUEVA VERSI√ìN DE SW NUCLEAR - ACTIVANDO');
                            const newWorker = registration.installing;
                            newWorker.postMessage({ command: 'NUCLEAR_ACTIVATE' });
                        });
                    })
                    .catch(error => {
                        console.warn('üß® ERROR REGISTRANDO SW NUCLEAR:', error);
                    });
            } else {
                console.log('‚úÖ No es Chrome - SW Nuclear no necesario');
            }
        }

        // NUCLEAR: Auto-reload adaptativo - Chrome cada 30min, otros cada hora
        const isChromeForRefresh = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
        const refreshTime = isChromeForRefresh ? 1800000 : 3600000; // Chrome: 30min, otros: 1h

        console.log('‚è∞ Auto-refresh configurado para', isChromeForRefresh ? 'Chrome (30min)' : 'otros navegadores (1h)');

        setTimeout(function () {
            console.log('üîÑ NUCLEAR: Auto-refresh ejecut√°ndose para', isChromeForRefresh ? 'Chrome' : 'navegador est√°ndar');
            location.reload(true); // true forza bypass de cach√©
        }, refreshTime);
    </script>
    <script>
// Funci√≥n real para mostrar la pantalla de detalle de provincia
window.__registerImpl && window.__registerImpl('selectProvince', function(provId) {
    // Buscar la provincia en appData
    if (!window.appData || !Array.isArray(window.appData.provincias)) return;
    const provincia = window.appData.provincias.find(p => p.id === provId || p.id === 'p-' + provId);
    if (!provincia) {
        alert('Provincia no encontrada: ' + provId);
        return;
    }
    // Actualizar currentProvince
    window.appData.currentProvince = provincia;
    // Mostrar secci√≥n de terminales
    if (typeof window.showSection === 'function') {
        window.showSection('terminal');
    }
    // Actualizar nombre de provincia en pantalla
    const nameEl = document.getElementById('current-province-name');
    if (nameEl) nameEl.textContent = provincia.nombre;
    // Renderizar terminales
    const grid = document.getElementById('terminal-grid');
    if (grid) {
        grid.innerHTML = '';
        (provincia.terminales || []).forEach(terminal => {
            const card = document.createElement('div');
            card.className = 'terminal-card';
            card.innerHTML = `<h3>${terminal.nombre}</h3><p>${terminal.ubicacion || ''}</p>`;
            grid.appendChild(card);
        });
    }
});
</script>
</body>

</html>